# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Kotlin Multiplatform (KMP) deck builder application for the Netrunner card game, targeting Android and iOS platforms using Compose Multiplatform for shared UI. The project uses a commonMain/platform-specific source set structure.

## Build Commands

### Android
```bash
# Build debug APK
./gradlew :composeApp:assembleDebug

# Build release APK
./gradlew :composeApp:assembleRelease
```

### iOS
Open the `/iosApp` directory in Xcode and build from there, or use the IDE's run configuration.

### Common Tasks
```bash
# Run tests
./gradlew :composeApp:testDebugUnitTest

# Clean build
./gradlew clean

# Build all targets
./gradlew build
```

Note: The project requires Java 11 toolchain. If you encounter toolchain errors, ensure JDK 11 is properly installed and configured.

## Architecture

### Source Set Structure
- **composeApp/src/commonMain/kotlin**: Shared Kotlin code for all platforms
  - UI components using Compose Multiplatform
  - ViewModels using androidx.lifecycle
  - Data models and business logic
- **composeApp/src/androidMain/kotlin**: Android-specific implementations
- **composeApp/src/iosMain/kotlin**: iOS-specific implementations
- **composeApp/src/commonTest/kotlin**: Shared tests

### Key Technologies
- **Compose Multiplatform**: Shared UI across Android and iOS
- **SQLDelight**: Type-safe SQL database with multiplatform support (database schema in `composeApp/src/commonMain/sqldelight/`)
- **Ktor**: HTTP client for network requests
- **Koin**: Dependency injection framework
- **Kotlinx Serialization**: JSON serialization/deserialization
- **Kotlinx Coroutines**: Asynchronous programming

### Application Architecture
- **MVVM Pattern**: UI states managed through ViewModels with StateFlow
- **Card Model**: Represents Netrunner cards with comprehensive fields (models/Card.kt)
  - Serializable with kotlinx.serialization
  - Maps to SQLDelight schema (Card.sq)
- **CardList Feature**: Example feature structure with ViewModel, State, and Composable UI
  - CardListViewModel: Manages UI state
  - CardListState: Data class holding the current list of cards
  - CardList: Composable UI component displaying cards in a LazyColumn

### Database
SQLDelight schema files are located in `composeApp/src/commonMain/sqldelight/`. The database is named "Database" with package `de.fatih_inan.netrunner_deck_builder`. Platform-specific drivers:
- Android: `android-driver`
- iOS: `native-driver`

### Platform Abstraction
Platform-specific code uses expect/actual pattern. See Platform.kt in commonMain with implementations in Platform.android.kt and Platform.ios.kt.

## Package Structure
Base package: `de.fatih_inan.netrunner_deck_builder`
- Features organized in subpackages (e.g., `cardlist/`)
- Models in `models/` package
- Database queries generated by SQLDelight from `.sq` files
